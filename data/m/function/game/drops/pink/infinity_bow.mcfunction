# summon item ~ ~ ~ {Item:{id:"enchanted_book",components:{"consumable":{},"custom_name":'{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}',"max_stack_size":1}},CustomName:'{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}',CustomNameVisible:1b}

execute as @a[nbt={Inventory:[{id:"minecraft:enchanted_book",components:{"minecraft:custom_name":{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}}},{id:"minecraft:bow"}]}] run tellraw @s [{"color":"light_purple","text":"Infinite Arrows! ",bold:true,italic:false},{"color":"#A3499d","text":"You Now Have Unlimited Arrows!",bold:false,italic:true}]
execute as @a[nbt={Inventory:[{id:"minecraft:enchanted_book",components:{"minecraft:custom_name":{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}}},{id:"minecraft:bow"}]}] run clear @s bow 1
execute if score @e[limit=1,tag=dummy] MapSwitch matches 1 as @a[nbt={Inventory:[{id:"minecraft:enchanted_book",components:{"minecraft:custom_name":{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}}}]}] run give @s bow[unbreakable={},enchantments={"punch":10,"infinity":1},custom_name={"text":"Infinity Knockback Bow","color":"light_purple","italic":false}]
execute if score @e[limit=1,tag=dummy] MapSwitch matches 2 as @a[nbt={Inventory:[{id:"minecraft:enchanted_book",components:{"minecraft:custom_name":{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}}}]}] run give @s bow[unbreakable={},enchantments={"punch":5,"infinity":1},custom_name={"text":"Infinity Knockback Bow","color":"light_purple","italic":false}]
execute if score @e[limit=1,tag=dummy] MapSwitch matches 3 as @a[nbt={Inventory:[{id:"minecraft:enchanted_book",components:{"minecraft:custom_name":{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}}}]}] run give @s bow[unbreakable={},enchantments={"punch":10,"infinity":1},custom_name={"text":"Infinity Knockback Bow","color":"light_purple","italic":false}]
execute as @a[nbt={Inventory:[{id:"minecraft:enchanted_book",components:{"minecraft:custom_name":{"text":"Infinity Bow Enchant","color":"light_purple","italic":false}}}]}] run give @s arrow[enchantments={"infinity":1},custom_name={"text":"Infinity Arrow","color":"light_purple","italic":false}]
clear @a minecraft:enchanted_book[minecraft:custom_name={"text":"Infinity Bow Enchant","color":"light_purple","italic":false}]